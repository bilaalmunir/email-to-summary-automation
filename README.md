# Email Extractor and Summarizer API

A FastAPI application that extracts emails from text files, stores them in Supabase, and provides AI-powered summaries.

## Features

- Extract multiple email addresses from text files
- Store extracted emails in Supabase
- Generate AI-powered summaries of email collections
- RESTful API endpoints for extraction and retrieval

## Setup

1. Clone the repository
2. Install dependencies:
   ```bash
   pip install -r requirements.txt
   ```

3. Copy `.env.example` to `.env` and fill in your credentials:
   ```
   SUPABASE_URL=your_supabase_url
   SUPABASE_KEY=your_supabase_anon_key
   OPENAI_API_KEY=your_openai_api_key
   ```

4. Create a Supabase table named `emails` with the following schema:
   ```sql
   create table emails (
     id bigint generated by default as identity primary key,
     email text not null,
     extracted_at timestamp with time zone default timezone('utc'::text, now()) not null
   );
   ```

5. Run the application:
   ```bash
   uvicorn app.main:app --reload
   ```

## API Endpoints

### POST /extract
Upload a text file to extract and store email addresses.

### GET /emails
Retrieve all stored emails with an AI-generated summary.

## Usage Example

1. Extract emails from a text file:
   ```bash
   curl -X POST "http://localhost:8000/extract" \
     -H "Content-Type: multipart/form-data" \
     -F "file=@sample.txt"
   ```

2. Retrieve stored emails:
   ```bash
   curl "http://localhost:8000/emails"
   ```
